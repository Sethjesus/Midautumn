<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>🎑 中秋快樂 UDM ESG</title>
<style>
  body{margin:0;font-family:"Microsoft JhengHei",sans-serif;background:#0b1d3a;color:#fff;text-align:center;overflow-x:hidden;position:relative}
  header{padding:20px 80px 10px 20px;font-size:2em;font-weight:bold;color:#ffd700;position:relative;z-index:5}
  header img.logo{position:absolute;right:20px;top:16px;height:50px}

  .blessing{margin:8px auto 20px;font-size:1.1em;line-height:1.6em;max-width:900px;color:#ffea85;position:relative;z-index:5}

  .slideshow{position:relative;max-width:900px;height:520px;margin:0 auto;overflow:hidden;border-radius:16px;
    box-shadow:0 0 20px rgba(255,255,255,.3);display:grid;place-items:center;
    background:radial-gradient(ellipse at center, rgba(255,255,255,.06), rgba(0,0,0,0));z-index:5}
  .slideshow img{position:absolute;inset:0;margin:auto;max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;opacity:0;transition:opacity 1s ease-in-out}
  .slideshow img.active{opacity:1}

  .caption{margin:14px auto 0;min-height:32px;font-size:1.25em;color:#ffde59;transition:opacity .5s ease;position:relative;z-index:5}
  .caption.fade{opacity:0}

  .quiz{margin:32px auto 80px;max-width:720px;background:rgba(255,255,255,.1);padding:20px;border-radius:12px;position:relative;z-index:5}
  .quiz h2{margin-bottom:16px;color:#ffd700}
  .question{margin-bottom:18px;text-align:left}
  .question p{margin:6px 0}
  button{background:#ffd700;border:none;border-radius:6px;padding:8px 16px;margin:4px;cursor:pointer;font-size:1em}
  button:hover{background:#ffea85}
  .result{margin-top:20px;font-size:1.2em;font-weight:bold}

  .muted-toggle{position:fixed;right:16px;bottom:16px;background:#1e3a8a;color:#ffde59;border:1px solid #264;padding:8px 10px;border-radius:8px;font-size:.9em;cursor:pointer;z-index:20}

  /* --- 裝飾層固定在最底，不擋點擊 --- */
  #decorations{position:fixed; inset:0; z-index:0; pointer-events:none}

  /* 星空 */
  .star{position:absolute;background:#fff;border-radius:50%;opacity:.8;animation:twinkle 2s infinite ease-in-out}
  @keyframes twinkle{0%,100%{opacity:.2}50%{opacity:1}}

  /* 月亮（乾淨） + 月暈（整體淡化且在底層） */
  .moon{position:absolute;top:10%;left:-150px;width:120px;height:120px;background:radial-gradient(circle at 30% 30%, #fff9c4, #fdd835);
    border-radius:50%;box-shadow:0 0 30px rgba(255,240,200,.8);animation:moveMoon 60s linear infinite;z-index:0; opacity:.55}
  .moon::after{
    content:""; position:absolute; inset:-25px; border-radius:50%;
    background:radial-gradient(circle, rgba(255,230,140,.28), rgba(255,230,140,0) 60%);
    animation:pulse 4.5s ease-in-out infinite;
  }
  @keyframes moveMoon{from{left:-150px;top:15%}50%{left:50%;top:5%}to{left:110%;top:12%}}
  @keyframes pulse{0%,100%{opacity:.35; transform:scale(1)}50%{opacity:.55; transform:scale(1.08)}}

  /* 雲彩（更淡，底層） */
  .cloud{position:absolute;background:rgba(255,255,255,.85);border-radius:50%;filter:blur(8px);animation:moveClouds linear infinite; opacity:.35; z-index:0}
  @keyframes moveClouds{from{transform:translateX(-200px)}to{transform:translateX(120vw)}}

  /* 天燈（孔明燈造型） */
  .lantern{position:absolute;width:34px;height:46px;
    background:radial-gradient(circle at 50% 20%, #ffd9a8 0%, #ffb15c 45%, #ff8a3d 100%);
    border-radius:10px 10px 14px 14px; box-shadow:0 0 18px rgba(255,140,60,.6);
    animation:floatLantern 16s linear infinite; z-index:0; opacity:.75}
  .lantern::before{content:"";position:absolute;top:-8px;left:50%;transform:translateX(-50%);width:16px;height:8px;border:2px solid rgba(255,210,150,.9);border-bottom:none;border-radius:10px 10px 0 0}
  .lantern::after{content:"";position:absolute;bottom:-12px;left:50%;transform:translateX(-50%);width:2px;height:12px;background:rgba(255,210,150,.9);box-shadow:0 0 8px rgba(255,210,150,.8)}
  @keyframes floatLantern{from{transform:translateY(60vh) translateX(0);opacity:0}10%{opacity:1}to{transform:translateY(-120vh) translateX(25px);opacity:.2}}

  /* 放射狀煙火火花（滿分觸發） */
  .firework{position:absolute;width:4px;height:4px;background:yellow;border-radius:50%;opacity:0;animation:shoot 1.2s ease-out forwards}
  @keyframes shoot{0%{transform:translate(0,0) scale(1);opacity:1}80%{opacity:1}100%{transform:translate(var(--x),var(--y)) scale(.8);opacity:0}}

  /* 手機：再降透明度、縮小月亮、調整高度與字級 */
  @media (max-width: 480px){
    .moon{ opacity:.38; width:96px; height:96px; }
    .moon::after{ opacity:.22; }
    .cloud{ opacity:.22; }
    .slideshow{ height:440px; }
    header{ font-size:1.6em; }
    .blessing{ padding:0 12px; }
  }
</style>
</head>
<body>
  <header>
    🌕 景煬祝您佳節愉快 🌏
    <img src="Logo.png" class="logo" alt="公司Logo" />
  </header>

  <button class="muted-toggle" id="muteBtn">🔈 音效：開</button>

  <div class="blessing">
    景煬祝您和家人中秋團圓，幸福美滿 🎑<br/>
  </div>

  <div class="slideshow" id="slideshow">
    <img src="01_current_detection.png" class="active" alt="能源偵測"/>
    <img src="02_air_wind.png" alt="清新空氣"/>
    <img src="03_water_river.png" alt="溪河水文"/>
    <img src="04_transport_bike.png" alt="綠色交通"/>
    <img src="06_midautumn_moon.png" alt="中秋明月"/>
    <img src="07_hands_earth.png" alt="守護地球"/>
  </div>
  <div class="caption" id="caption">UDM ESG 景煬 祝您中秋快樂、闔家安康 🎑</div>

  <div class="quiz">
    <h2>🌱 ESG 小問答</h2>
    <div class="question">
      <p>1️⃣ 中秋節最環保的活動是？</p>
      <button onclick="checkAnswer(this,true)">賞月、品茶</button>
      <button onclick="checkAnswer(this,false)">大量燒炭烤肉</button>
    </div>
    <div class="question">
      <p>2️⃣ 為什麼要監測工廠或大樓的電力使用？</p>
      <button onclick="checkAnswer(this,true)">找出節能空間，降低成本與碳排</button>
      <button onclick="checkAnswer(this,false)">只是好玩，沒有實際效益</button>
    </div>
    <div class="question">
      <p>3️⃣ 即時電流/功率監測對環保有什麼幫助？</p>
      <button onclick="checkAnswer(this,true)">及早發現異常與浪費，避免不必要耗能</button>
      <button onclick="checkAnswer(this,false)">與環保無關</button>
    </div>
    <div class="question">
      <p>4️⃣ 哪種做法最能降低電費與碳排？</p>
      <button onclick="checkAnswer(this,true)">使用高效率設備並監控尖離峰用電</button>
      <button onclick="checkAnswer(this,false)">所有機器 24 小時全速運轉</button>
    </div>
    <div class="question">
      <p>5️⃣ kWh（度電）代表什麼？</p>
      <button onclick="checkAnswer(this,true)">用電量（功率 × 時間）</button>
      <button onclick="checkAnswer(this,false)">電壓的單位</button>
    </div>
    <div class="question">
      <p>6️⃣ 以排放係數 ~0.495 kgCO₂e/kWh 計，今天用電 10 kWh 約排放多少？</p>
      <button onclick="checkAnswer(this,true)">約 4.95 kgCO₂e</button>
      <button onclick="checkAnswer(this,false)">約 0.495 kgCO₂e</button>
      <button onclick="checkAnswer(this,false)">約 49.5 kgCO₂e</button>
    </div>
    <div class="question">
      <p>7️⃣ 下面哪項最能立刻降低待機耗電？</p>
      <button onclick="checkAnswer(this,true)">使用有開關延長線，離開時關閉待機</button>
      <button onclick="checkAnswer(this,false)">螢幕亮度調到最亮</button>
    </div>
    <div class="result" id="result"></div>
  </div>

  <!-- 裝飾層（固定在底部，不遮字） -->
  <div id="decorations"></div>
  <div class="moon"></div>

  <!-- 古箏風背景音樂 -->
  <audio id="bgm" autoplay loop>
    <source src="https://cdn.pixabay.com/audio/2021/08/04/audio_30a195997c.mp3" type="audio/mpeg"/>
  </audio>

<script>
  /* 圖片與文字輪播 */
  const slides=document.querySelectorAll('.slideshow img');
  const caption=document.getElementById('caption');
  const messages=[
    'UDM ESG 景煬 祝您中秋快樂、闔家安康 🎑',
    '風清氣爽、河川潺潺，願您平安健康 💙',
    '月圓人團圓 · 清風明月伴好眠 🍵',
    '騎車賞月不塞車，綠色交通好自在 🚴',
    '節能減碳、守護地球，讓幸福更長久 🌍',
    '守護地球，中秋垃圾帶回家 ♻️'
  ];
  let current=0,msgIndex=0;
  setInterval(()=>{slides[current].classList.remove('active');current=(current+1)%slides.length;slides[current].classList.add('active');caption.classList.add('fade');setTimeout(()=>{msgIndex=(msgIndex+1)%messages.length;caption.textContent=messages[msgIndex];caption.classList.remove('fade');},400);},3000);

  /* 背景樂/音效（若自動播放被擋，第一次互動即啟用） */
  const AudioCTX=window.AudioContext||window.webkitAudioContext;
  let actx=null, muted=false;
  const bgm=document.getElementById('bgm'), muteBtn=document.getElementById('muteBtn');
  (async()=>{try{await bgm.play();}catch(e){}})();
  function initAudio(){ if(!actx) actx=new AudioCTX(); if(bgm.paused){bgm.play().catch(()=>{});} window.removeEventListener('click',initAudio); window.removeEventListener('keydown',initAudio); window.removeEventListener('touchstart',initAudio); }
  window.addEventListener('click',initAudio,{once:true}); window.addEventListener('keydown',initAudio,{once:true}); window.addEventListener('touchstart',initAudio,{once:true});
  muteBtn.onclick=()=>{ muted=!muted; muteBtn.textContent=muted?'🔇 音效：關':'🔈 音效：開'; bgm.muted=muted; };
  function tone(freq=880,dur=0.15,type='sine',vol=0.2){ if(muted||!actx) return; const o=actx.createOscillator(), g=actx.createGain(); o.type=type; o.frequency.value=freq; g.gain.value=vol; g.gain.exponentialRampToValueAtTime(0.0001,(actx.currentTime+dur)); o.connect(g).connect(actx.destination); o.start(); o.stop(actx.currentTime+dur); }
  function playCorrect(){ tone(1046,0.12,'triangle',0.25); setTimeout(()=>tone(1318,0.12,'triangle',0.22),110); }
  function playWrong(){ tone(220,0.18,'sawtooth',0.25); setTimeout(()=>tone(196,0.2,'sawtooth',0.22),160); }
  function playWin(){ [784,988,1175].forEach((f,i)=>setTimeout(()=>tone(f,0.18,'sine',0.28), i*150)); triggerFireworks(); }

  /* 小遊戲 */
  let score=0,answered=0;
  const totalQuestions=document.querySelectorAll('.question').length;
  function checkAnswer(btn,ok){
    if(btn.classList.contains('answered')) return;
    const box=btn.closest('.question'); if(box.dataset.locked) return; box.dataset.locked='1';
    btn.classList.add('answered'); answered++;
    if(ok){ score++; btn.style.background='#4CAF50'; playCorrect(); } else { btn.style.background='#E74C3C'; playWrong(); }
    if(answered>=totalQuestions){
      const result=document.getElementById('result');
      if(score===totalQuestions){ result.innerHTML='🎉 太強了！滿分 '+score+'/'+totalQuestions+'，你是 ESG 守護者！🎑'; triggerFireworks(); playWin(); }
      else{ result.innerHTML=`完成！得分 ${score}/${totalQuestions}，一起持續節能減碳 🌍`; }
    }
  }
  window.checkAnswer=checkAnswer;

  /* 星空／雲彩／天燈生成（裝飾層在底部，不會遮字） */
  const deco=document.getElementById('decorations');
  for(let i=0;i<60;i++){const s=document.createElement('div');s.className='star';s.style.width=s.style.height=(Math.random()*2+1)+'px';s.style.top=(Math.random()*100)+'%';s.style.left=(Math.random()*100)+'%';s.style.animationDuration=(2+Math.random()*3)+'s';deco.appendChild(s);}
  for(let i=0;i<3;i++){const c=document.createElement('div');c.className='cloud';c.style.width=(200+Math.random()*150)+'px';c.style.height=(80+Math.random()*40)+'px';c.style.top=(10+Math.random()*30)+'%';c.style.left='-200px';c.style.animationDuration=(50+Math.random()*30)+'s';deco.appendChild(c);}
  for(let i=0;i<6;i++){const l=document.createElement('div');l.className='lantern';l.style.left=(Math.random()*90)+'%';l.style.animationDelay=(i*2)+'s';deco.appendChild(l);}

  /* 放射狀煙火（滿分觸發） */
  function triggerFireworks(){
    const colors=['#ff0','#f0f','#0ff','#0f0','#f00','#ffa500','#00f'];
    for(let n=0;n<5;n++){
      setTimeout(()=>{
        for(let i=0;i<40;i++){
          const f=document.createElement('div'); f.className='firework';
          f.style.left='50%'; f.style.top='40%';
          const angle=Math.random()*2*Math.PI, dist=80+Math.random()*120;
          f.style.setProperty('--x',`${Math.cos(angle)*dist}px`);
          f.style.setProperty('--y',`${Math.sin(angle)*dist}px`);
          f.style.background=colors[Math.floor(Math.random()*colors.length)];
          document.body.appendChild(f); setTimeout(()=>f.remove(),1300);
        }
      },n*500);
    }
  }
</script>
</body>
</html>
