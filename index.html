<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>ğŸ‘ ä¸­ç§‹å¿«æ¨‚ ESG å‹•æ…‹è³€å¡</title>
<style>
  body{margin:0;font-family:"Microsoft JhengHei",sans-serif;background:#0b1d3a;color:#fff;text-align:center;overflow-x:hidden;position:relative}
  header{padding:20px 80px 10px 20px;font-size:2em;font-weight:bold;color:#ffd700;position:relative;z-index:10}
  header a.logo-link{position:absolute;right:20px;top:10px;text-align:center;text-decoration:none}
  header img.logo{height:50px;animation:pulseLogo 2.5s infinite ease-in-out;transform-origin:center;display:block;margin:auto;cursor:pointer}
  @keyframes pulseLogo{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
  header .hint{
    display:inline-block;margin-top:6px;padding:4px 12px;font-size:.82em;color:#0b1d3a;
    background:linear-gradient(135deg,#ffefb2,#ffc157);
    border-radius:999px;box-shadow:0 0 8px rgba(255,205,110,.75), 0 0 18px rgba(255,205,110,.35);
    animation:glowHint 1.6s infinite alternate;transition:transform .2s ease, box-shadow .2s ease; white-space:nowrap;
  }
  header a.logo-link:hover .hint{transform:translateY(-1px) scale(1.06);box-shadow:0 0 14px rgba(255,220,140,1), 0 0 28px rgba(255,220,140,.55)}
  @keyframes glowHint{0%{opacity:.75}100%{opacity:1}}

  .blessing{margin:8px auto 20px;font-size:1.1em;line-height:1.6em;max-width:900px;color:#ffea85;position:relative;z-index:10}

  .slideshow{position:relative;max-width:900px;height:520px;margin:0 auto;overflow:hidden;border-radius:16px;
    box-shadow:0 0 20px rgba(255,255,255,.3);display:grid;place-items:center;
    background:radial-gradient(ellipse at center, rgba(255,255,255,.06), rgba(0,0,0,0));z-index:10}
  .slideshow img{position:absolute;inset:0;margin:auto;max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;opacity:0;transition:opacity 1s ease-in-out}
  .slideshow img.active{opacity:1}
  .caption{margin:14px auto 0;min-height:32px;font-size:1.25em;color:#ffde59;transition:opacity .5s ease;position:relative;z-index:10}
  .caption.fade{opacity:0}

  .quiz{margin:32px auto 80px;max-width:720px;background:rgba(255,255,255,.1);padding:20px;border-radius:12px;position:relative;z-index:10}
  .quiz h2{margin-bottom:16px;color:#ffd700}
  .question{margin-bottom:18px;text-align:left}
  .question p{margin:6px 0}
  button{background:#ffd700;border:none;border-radius:6px;padding:8px 16px;margin:4px;cursor:pointer;font-size:1em;color:#222;font-weight:bold}
  button:hover{background:#ffea85}
  .result{margin-top:20px;font-size:1.2em;font-weight:bold}

  .muted-toggle{
    position:fixed;background:#0b1d3a;color:#ffffff;border:1px solid #ffd700;
    padding:8px 12px;border-radius:8px;font-size:.95em;cursor:pointer;z-index:20;
    box-shadow:0 0 6px rgba(255,215,0,.4);transition:all .25s ease;
  }
  .muted-toggle:hover{background:#1e3a8a;color:#ffde59;box-shadow:0 0 12px rgba(255,215,0,.7)}
  #bgmToggle{left:16px;bottom:16px}
  #muteBtn{right:16px;bottom:16px}

  #qixi-bg{position:fixed; inset:0; z-index:0; pointer-events:none; opacity:.22}
  #decorations{position:fixed; inset:0; z-index:1; pointer-events:none}
  .star{position:absolute;background:#fff;border-radius:50%;opacity:.8;animation:twinkle 2s infinite ease-in-out}
  @keyframes twinkle{0%,100%{opacity:.2}50%{opacity:1}}
  .moon{position:absolute;top:10%;left:-150px;width:120px;height:120px;background:radial-gradient(circle at 30% 30%, #fff9c4, #fdd835);
    border-radius:50%;box-shadow:0 0 30px rgba(255,240,200,.8);animation:moveMoon 60s linear infinite;z-index:1; opacity:.55}
  .moon::after{content:""; position:absolute; inset:-25px; border-radius:50%;
    background:radial-gradient(circle, rgba(255,230,140,.28), rgba(255,230,140,0) 60%); animation:pulse 4.5s ease-in-out infinite;}
  @keyframes moveMoon{from{left:-150px;top:15%}50%{left:50%;top:5%}to{left:110%;top:12%}}
  @keyframes pulse{0%,100%{opacity:.35}50%{opacity:.55}}

  .cloud{position:absolute;background:rgba(255,255,255,.32);border-radius:50%;filter:blur(10px);animation:moveClouds linear infinite; z-index:2}
  @keyframes moveClouds{from{transform:translateX(-200px)}to{transform:translateX(120vw)}}

  .firework{position:absolute;width:4px;height:4px;border-radius:50%;opacity:0;animation:shoot 1.2s ease-out forwards}
  @keyframes shoot{0%{transform:translate(0,0) scale(1);opacity:1}80%{opacity:1}100%{transform:translate(var(--x),var(--y)) scale(.8);opacity:0}}

  .petal{
    position:fixed; top:-20px; left:0; width:10px; height:8px; border-radius:8px 8px 6px 6px / 8px 8px 4px 4px;
    background:linear-gradient(145deg,#ffd87a,#ffb347); box-shadow:0 0 6px rgba(255,210,120,.6); opacity:.9;
    animation:fall var(--dur) linear infinite, sway 3.6s ease-in-out infinite;
  }
  @keyframes fall { to { transform: translateY(110vh) translateX(var(--drift)); } }
  @keyframes sway { 0%,100%{ transform:rotate(0deg) } 50%{ transform:rotate(18deg) } }

  .hang{ position:fixed; top:6px; left:50%; transform:translateX(-50%); width:80%; height:0; z-index:12; pointer-events:none;}
  .hang .dot{
    position:absolute; top:0; width:18px; height:18px; border-radius:50%;
    background:radial-gradient(circle at 35% 35%, #fff1b8, #ffbd4a 60%, #d97b00 100%);
    box-shadow:0 0 12px rgba(255,200,120,.9);
    transform-origin:top center; animation:swing 4s ease-in-out infinite;
  }
  .hang .line{ position:absolute; top:-12px; width:2px; height:14px; background:rgba(255,230,160,.7); left:9px; transform-origin:top; animation:swing 4s ease-in-out infinite; }
  @keyframes swing{0%,100%{transform:rotate(-3deg)}50%{transform:rotate(3deg)}}

  .bridge-lights circle{opacity:.4;animation:twinkleLight 2s infinite alternate}
  .bridge-lights circle:nth-child(2){animation-delay:.4s}
  .bridge-lights circle:nth-child(3){animation-delay:.8s}
  .bridge-lights circle:nth-child(4){animation-delay:1.2s}
  .bridge-lights circle:nth-child(5){animation-delay:1.6s}
  .bridge-lights circle:nth-child(6){animation-delay:2s}
  @keyframes twinkleLight{from{opacity:.3;r:2}to{opacity:1;r:3}}

  @media (max-width: 480px){
    header{ font-size: 1.55em; padding-right: 90px; padding-bottom: 56px; }
    header a.logo-link{ top:8px; right:12px; }
    header .hint{ font-size:.72em; padding:2px 8px; margin-top:4px; }
    header .hint.auto-hide{ animation: glowHint 1.6s infinite alternate, fadeOutHint .8s ease 4s forwards; }
    @keyframes fadeOutHint{ to { opacity: 0; transform: translateY(-2px) scale(.96); } }
    .slideshow{ height:440px; }
    .moon{ opacity:.38; width:96px; height:96px; }
    .moon::after{ opacity:.22; }
    .cloud{ opacity:.22; }
    .blessing{ padding:0 12px; }
  }
</style>
</head>
<body>
  <header>
    ğŸŒ• ä¸­ç§‹å¿«æ¨‚ Â· æ°¸çºŒå®ˆè­·åœ°çƒ ğŸŒ
    <a href="https://jpesg.netlify.app/" target="_blank" class="logo-link" aria-label="å‰å¾€ UDM ESG å®˜ç¶²ï¼ˆå¦é–‹æ–°è¦–çª—ï¼‰">
      <img src="Logo.png" class="logo" alt="å…¬å¸Logo" />
      <span class="hint">ğŸ‘† è«‹æŒ‰æˆ‘</span>
    </a>
  </header>

  <!-- èƒŒæ™¯éŸ³æ¨‚ï¼šç’°å¢ƒé‹¼ç´ï¼ˆè«‹æŠŠ MP3 æª”æ”¾åŒè³‡æ–™å¤¾ï¼Œæª”åå¦‚ä¸‹ä¸€è¡Œï¼‰ -->
  <audio id="bgm" loop muted playsinline preload="auto">
    <source src="ambient-piano-and-strings-10711.mp3" type="audio/mpeg"/>
  </audio>

  <!-- æ§åˆ¶éµ -->
  <button class="muted-toggle" id="bgmToggle">ğŸµ èƒŒæ™¯éŸ³æ¨‚ï¼šé–‹</button>
  <button class="muted-toggle" id="muteBtn">ğŸ”ˆ ç­”é¡ŒéŸ³æ•ˆï¼šé–‹</button>

  <div class="blessing">
    æ™¯ç…¬ç¥æ‚¨å’Œå®¶äººä¸­ç§‹åœ˜åœ“ï¼Œå¹¸ç¦ç¾æ»¿ ğŸ‘<br/>
    æ˜æœˆåƒé‡Œå¯„ç›¸æ€ï¼Œæ¸…é¢¨é€ä¾†å¹³å®‰å–œæ¨‚ ğŸµ<br/>
    é¡˜æˆ‘å€‘åœ¨äº«å—åœ˜èšçš„åŒæ™‚ï¼Œä¹Ÿä¸€åŒå®ˆè­·ç’°å¢ƒã€å®ˆè­·åœ°çƒ ğŸŒ<br/>
    ğŸŒ¸ ä¸­ç§‹ä½³ç¯€å¿«æ¨‚ï¼
  </div>

  <!-- Slideshow -->
  <div class="slideshow" id="slideshow">
    <img src="01_current_detection.png" class="active" alt="èƒ½æºåµæ¸¬"/>
    <img src="02_air_wind.png" alt="æ¸…æ–°ç©ºæ°£"/>
    <img src="03_water_river.png" alt="æºªæ²³æ°´æ–‡"/>
    <img src="04_transport_bike.png" alt="ç¶ è‰²äº¤é€š"/>
    <img src="06_midautumn_moon.png" alt="ä¸­ç§‹æ˜æœˆ"/>
    <img src="07_hands_earth.png" alt="å®ˆè­·åœ°çƒ"/>
  </div>
  <div class="caption" id="caption">UDM ESG æ™¯ç…¬ ç¥æ‚¨ä¸­ç§‹å¿«æ¨‚ã€é—”å®¶å®‰åº· ğŸ‘</div>

  <!-- Quiz -->
  <div class="quiz">
    <h2>ğŸŒ± ESG å°å•ç­”</h2>
    <div class="question">
      <p>1ï¸âƒ£ ä¸­ç§‹ç¯€æœ€ç’°ä¿çš„æ´»å‹•æ˜¯ï¼Ÿ</p>
      <button onclick="checkAnswer(this,true)">è³æœˆã€å“èŒ¶</button>
      <button onclick="checkAnswer(this,false)">å¤§é‡ç‡’ç‚­çƒ¤è‚‰</button>
    </div>
    <div class="question">
      <p>2ï¸âƒ£ ç‚ºä»€éº¼è¦ç›£æ¸¬å·¥å» æˆ–å¤§æ¨“çš„é›»åŠ›ä½¿ç”¨ï¼Ÿ</p>
      <button onclick="checkAnswer(this,true)">æ‰¾å‡ºç¯€èƒ½ç©ºé–“ï¼Œé™ä½æˆæœ¬èˆ‡ç¢³æ’</button>
      <button onclick="checkAnswer(this,false)">åªæ˜¯å¥½ç©ï¼Œæ²’æœ‰å¯¦éš›æ•ˆç›Š</button>
    </div>
    <div class="question">
      <p>3ï¸âƒ£ å³æ™‚é›»æµ/åŠŸç‡ç›£æ¸¬å°ç’°ä¿æœ‰ä»€éº¼å¹«åŠ©ï¼Ÿ</p>
      <button onclick="checkAnswer(this,true)">åŠæ—©ç™¼ç¾ç•°å¸¸èˆ‡æµªè²»ï¼Œé¿å…ä¸å¿…è¦è€—èƒ½</button>
      <button onclick="checkAnswer(this,false)">èˆ‡ç’°ä¿ç„¡é—œ</button>
    </div>
    <div class="question">
      <p>4ï¸âƒ£ å“ªç¨®åšæ³•æœ€èƒ½é™ä½é›»è²»èˆ‡ç¢³æ’ï¼Ÿ</p>
      <button onclick="checkAnswer(this,true)">ä½¿ç”¨é«˜æ•ˆç‡è¨­å‚™ä¸¦ç›£æ§å°–é›¢å³°ç”¨é›»</button>
      <button onclick="checkAnswer(this,false)">æ‰€æœ‰æ©Ÿå™¨ 24 å°æ™‚å…¨é€Ÿé‹è½‰</button>
    </div>
    <div class="question">
      <p>5ï¸âƒ£ kWhï¼ˆåº¦é›»ï¼‰ä»£è¡¨ä»€éº¼ï¼Ÿ</p>
      <button onclick="checkAnswer(this,true)">ç”¨é›»é‡ï¼ˆåŠŸç‡ Ã— æ™‚é–“ï¼‰</button>
      <button onclick="checkAnswer(this,false)">é›»å£“çš„å–®ä½</button>
    </div>
    <div class="question">
      <p>6ï¸âƒ£ ä»¥æ’æ”¾ä¿‚æ•¸ ~0.495 kgCOâ‚‚e/kWh è¨ˆï¼Œä»Šå¤©ç”¨é›» 10 kWh ç´„æ’æ”¾å¤šå°‘ï¼Ÿ</p>
      <button onclick="checkAnswer(this,true)">ç´„ 4.95 kgCOâ‚‚e</button>
      <button onclick="checkAnswer(this,false)">ç´„ 0.495 kgCOâ‚‚e</button>
      <button onclick="checkAnswer(this,false)">ç´„ 49.5 kgCOâ‚‚e</button>
    </div>
    <div class="question">
      <p>7ï¸âƒ£ ä¸‹é¢å“ªé …æœ€èƒ½ç«‹åˆ»é™ä½å¾…æ©Ÿè€—é›»ï¼Ÿ</p>
      <button onclick="checkAnswer(this,true)">ä½¿ç”¨æœ‰é–‹é—œå»¶é•·ç·šï¼Œé›¢é–‹æ™‚é—œé–‰å¾…æ©Ÿ</button>
      <button onclick="checkAnswer(this,false)">è¢å¹•äº®åº¦èª¿åˆ°æœ€äº®</button>
    </div>
    <div class="result" id="result"></div>
  </div>

  <!-- èƒŒæ™¯ SVGï¼ˆç‰›éƒç¹”å¥³ï¼‰ -->
  <svg id="qixi-bg" viewBox="0 0 1000 600" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
    <defs>
      <linearGradient id="milky" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#7fc7ff" stop-opacity="0.08"/>
        <stop offset="50%" stop-color="#d6e9ff" stop-opacity="0.26"/>
        <stop offset="100%" stop-color="#7fc7ff" stop-opacity="0.08"/>
      </linearGradient>
      <radialGradient id="glow" cx="50%" cy="50%" r="50%">
        <stop offset="0%" stop-color="#ffe6a0" stop-opacity="0.35"/>
        <stop offset="100%" stop-color="#ffe6a0" stop-opacity="0"/>
      </radialGradient>
      <symbol id="magpie" viewBox="-6 -5 12 10">
        <path d="M-5,0 L0,-4 L5,0 L0,2 Z" fill="#ffd08a" fill-opacity=".65"/>
        <circle cx="0" cy="1.2" r="1.2" fill="#ffd08a" fill-opacity=".75"/>
      </symbol>
    </defs>

    <g transform="rotate(-25 500 300)">
      <rect x="-100" y="150" width="1200" height="140" fill="url(#milky)"/>
      <rect x="100" y="170" width="800" height="100" fill="url(#milky)" opacity=".5"/>
    </g>

    <circle cx="160" cy="90" r="120" fill="url(#glow)"/>

    <path d="M140,390 C300,300 700,300 860,390" fill="none" stroke="#ffd08a" stroke-opacity=".22" stroke-width="16"/>
    <path d="M160,380 C310,310 690,310 840,380" fill="none" stroke="#ffd08a" stroke-opacity=".35" stroke-width="6"/>

    <g opacity=".9">
      <use href="#magpie" x="200" y="360" transform="rotate(-12 200 360)"/>
      <use href="#magpie" x="245" y="345" transform="rotate(-10 245 345)"/>
      <use href="#magpie" x="285" y="332" transform="rotate(-8 285 332)"/>
      <use href="#magpie" x="325" y="322" transform="rotate(-6 325 322)"/>
      <use href="#magpie" x="365" y="314" transform="rotate(-4 365 314)"/>
      <use href="#magpie" x="405" y="308" transform="rotate(-2 405 308)"/>
      <use href="#magpie" x="445" y="305" transform="rotate(0 445 305)"/>
      <use href="#magpie" x="485" y="304" transform="rotate(2 485 304)"/>
      <use href="#magpie" x="525" y="305" transform="rotate(4 525 305)"/>
      <use href="#magpie" x="565" y="309" transform="rotate(6 565 309)"/>
      <use href="#magpie" x="605" y="315" transform="rotate(8 605 315)"/>
      <use href="#magpie" x="645" y="323" transform="rotate(10 645 323)"/>
      <use href="#magpie" x="685" y="334" transform="rotate(12 685 334)"/>
      <use href="#magpie" x="730" y="348" transform="rotate(14 730 348)"/>
    </g>

    <g class="bridge-lights">
      <circle cx="220" cy="352" r="2" fill="#ffd97a"/>
      <circle cx="300" cy="334" r="2" fill="#ffd97a"/>
      <circle cx="420" cy="312" r="2" fill="#ffd97a"/>
      <circle cx="540" cy="306" r="2" fill="#ffd97a"/>
      <circle cx="660" cy="320" r="2" fill="#ffd97a"/>
      <circle cx="780" cy="346" r="2" fill="#ffd97a"/>
    </g>

    <g fill="#ffe0b6" fill-opacity=".9" stroke="none">
      <circle cx="460" cy="330" r="10" fill-opacity=".9"/>
      <rect x="455" y="340" width="10" height="24" rx="3" fill-opacity=".9"/>
      <circle cx="540" cy="330" r="10" fill-opacity=".95"/>
      <rect x="535" y="340" width="10" height="24" rx="3" fill-opacity=".95"/>
    </g>
    <g fill="#ffe0b6" fill-opacity=".55" stroke="#ffd9a0" stroke-opacity=".35" stroke-width="1">
      <path d="M450,362 C458,356 467,356 475,362 C470,372 455,372 450,362 Z"/>
      <path d="M525,364 C 532,356 548,356 555,366 C 560,380 548,392 540,395 C 532,392 520,380 525,364 Z"/>
      <path d="M520,366 C 532,360 551,360 560,372 C 562,384 550,398 538,402 C 526,398 516,384 520,366 Z" fill-opacity=".35"/>
      <path d="M548,338 C570,328 590,330 610,344" fill="none" stroke="#ffe6be" stroke-opacity=".5" stroke-width="2"/>
      <path d="M545,344 C565,336 585,338 600,352" fill="none" stroke="#ffe6be" stroke-opacity=".45" stroke-width="1.6"/>
    </g>

    <g fill="#fff" fill-opacity=".9" stroke="#bfe1ff" stroke-opacity=".55" stroke-width="1.2">
      <circle cx="760" cy="90"  r="2.3"/>
      <circle cx="800" cy="130" r="2.3"/>
      <circle cx="780" cy="180" r="2.3"/>
      <line x1="760" y1="90"  x2="800" y2="130"/>
      <line x1="800" y1="130" x2="780" y2="180"/>
      <line x1="780" y1="180" x2="760" y2="90"/>
    </g>

    <g opacity=".18">
      <ellipse cx="820" cy="150" rx="90" ry="40" fill="#cfe8ff"/>
      <ellipse cx="790" cy="210" rx="70" ry="28" fill="#cfe8ff"/>
    </g>
  </svg>

  <div id="decorations"></div>
  <div class="moon"></div>
  <div class="hang" id="hang"></div>

<script>
  /* åœ–ç‰‡èˆ‡æ–‡å­—è¼ªæ’­ */
  const slides=document.querySelectorAll('.slideshow img');
  const caption=document.getElementById('caption');
  const messages=[
    'UDM ESG æ™¯ç…¬ ç¥æ‚¨ä¸­ç§‹å¿«æ¨‚ã€é—”å®¶å®‰åº· ğŸ‘',
    'é¢¨æ¸…æ°£çˆ½ã€æ²³å·æ½ºæ½ºï¼Œé¡˜æ‚¨å¹³å®‰å¥åº· ğŸ’™',
    'æœˆåœ“äººåœ˜åœ“ Â· æ¸…é¢¨æ˜æœˆä¼´å¥½çœ  ğŸµ',
    'é¨è»Šè³æœˆä¸å¡è»Šï¼Œç¶ è‰²äº¤é€šå¥½è‡ªåœ¨ ğŸš´',
    'ç¯€èƒ½æ¸›ç¢³ã€å®ˆè­·åœ°çƒï¼Œè®“å¹¸ç¦æ›´é•·ä¹… ğŸŒ',
    'å®ˆè­·åœ°çƒï¼Œä¸­ç§‹åƒåœ¾å¸¶å›å®¶ â™»ï¸'
  ];
  let current=0,msgIndex=0;
  setInterval(()=>{
    slides[current].classList.remove('active');
    current=(current+1)%slides.length;
    slides[current].classList.add('active');
    caption.classList.add('fade');
    setTimeout(()=>{
      msgIndex=(msgIndex+1)%messages.length;
      caption.textContent=messages[msgIndex];
      caption.classList.remove('fade');
    },400);
  },3000);

  /* è£é£¾å±¤ */
  const deco=document.getElementById('decorations');
  for(let i=0;i<60;i++){
    const s=document.createElement('div'); s.className='star';
    s.style.width=s.style.height=(Math.random()*2+1)+'px';
    s.style.top=(Math.random()*100)+'%';
    s.style.left=(Math.random()*100)+'%';
    s.style.animationDuration=(2+Math.random()*3)+'s';
    deco.appendChild(s);
  }
  for(let i=0;i<3;i++){
    const c=document.createElement('div'); c.className='cloud';
    c.style.width=(200+Math.random()*150)+'px';
    c.style.height=(80+Math.random()*40)+'px';
    c.style.top=(10+Math.random()*30)+'%';
    c.style.left='-200px';
    c.style.animationDuration=(50+Math.random()*30)+'s';
    deco.appendChild(c);
  }
  const hang=document.getElementById('hang');
  for(let i=0;i<10;i++){
    const d=document.createElement('div'); d.className='dot'; d.style.left=(5+i*9)+'%';
    const line=document.createElement('div'); line.className='line'; line.style.left=d.style.left;
    hang.appendChild(line); hang.appendChild(d);
  }
  function spawnPetal(){
    const p=document.createElement('div'); p.className='petal';
    p.style.left=Math.random()*100+'%';
    p.style.setProperty('--dur',(8+Math.random()*8)+'s');
    p.style.setProperty('--drift',(Math.random()*160-80)+'px');
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),16000);
  }
  for(let i=0;i<18;i++) setTimeout(spawnPetal, i*400);
  setInterval(spawnPetal, 1200);
  function shootingStar(){
    const star=document.createElement('div');
    star.style.position='fixed';
    star.style.width='2px'; star.style.height='2px';
    star.style.borderRadius='50%'; star.style.background='#fff';
    const x=Math.random()*80+10, y=Math.random()*25+5;
    star.style.left=x+'%'; star.style.top=y+'%';
    star.style.boxShadow='0 0 10px rgba(255,255,255,.9)';
    star.animate([{transform:'translate(0,0)',opacity:1},{boxShadow:'0 0 20px rgba(255,255,255,1)'},{transform:'translate(-140px,120px)',opacity:0}],{duration:1400,easing:'ease-out'});
    document.body.appendChild(star);
    setTimeout(()=>star.remove(),1500);
  }
  setInterval(()=>{ if(Math.random()<0.35) shootingStar(); }, 2200);

  /* å°éŠæˆ² + ç­”é¡ŒéŸ³æ•ˆï¼ˆå« BGM duckingï¼‰ */
  const AudioCTX=window.AudioContext||window.webkitAudioContext;
  let actx=null, muted=false;
  const muteBtn=document.getElementById('muteBtn');
  function initAudio(){ if(!actx) actx=new AudioCTX(); }
  window.addEventListener('click',initAudio,{once:true});
  muteBtn.onclick=()=>{ muted=!muted; muteBtn.textContent=muted?'ğŸ”‡ ç­”é¡ŒéŸ³æ•ˆï¼šé—œ':'ğŸ”ˆ ç­”é¡ŒéŸ³æ•ˆï¼šé–‹'; };

  function tone(freq=880,dur=0.15,type='sine',vol=0.2){
    if(muted||!actx) return;
    duck(); // æ’­æ”¾æç¤ºéŸ³æ™‚ï¼Œè‡ªå‹•å£“ä½BGMä¸€é»é»
    const o=actx.createOscillator(), g=actx.createGain();
    o.type=type; o.frequency.value=freq; g.gain.value=vol;
    g.gain.exponentialRampToValueAtTime(0.0001,(actx.currentTime+dur));
    o.connect(g).connect(actx.destination);
    o.start(); o.stop(actx.currentTime+dur);
  }
  function playCorrect(){ tone(1046,0.12,'triangle',0.25); setTimeout(()=>tone(1318,0.12,'triangle',0.22),110); }
  function playWrong(){ tone(220,0.18,'sawtooth',0.25); setTimeout(()=>tone(196,0.2,'sawtooth',0.22),160); }
  function playWin(){ [784,988,1175].forEach((f,i)=>setTimeout(()=>tone(f,0.18,'sine',0.28), i*150)); /* è‹¥æ‚¨æœ‰ triggerFireworks() å¯åœ¨æ­¤å‘¼å« */ }

  // èƒŒæ™¯éŸ³æ¨‚æ§åˆ¶ï¼ˆç’°å¢ƒé‹¼ç´ï¼‰
  const bgmEl=document.getElementById('bgm');
  const bgmToggle=document.getElementById('bgmToggle');
  const BGM_TARGET_VOL = 0.28;
  let bgmEnabled = false;
  let fadeTimer = null;

  function fadeTo(vol, ms=600){
    if(fadeTimer) cancelAnimationFrame(fadeTimer);
    const startVol = bgmEl.volume;
    const start = performance.now();
    function step(now){
      const t = Math.min(1, (now-start)/ms);
      bgmEl.volume = startVol + (vol-startVol)*t;
      if(t < 1){ fadeTimer = requestAnimationFrame(step); }
    }
    fadeTimer = requestAnimationFrame(step);
  }

  function duck(ms=520, depth=0.45){
    if(!bgmEnabled) return;
    const minVol = Math.max(0, BGM_TARGET_VOL*(1-depth));
    fadeTo(minVol, 120);
    setTimeout(()=>fadeTo(BGM_TARGET_VOL, 300), ms);
  }

  bgmToggle.addEventListener('click', async ()=>{
    try{
      if(!bgmEnabled){
        bgmEl.muted=false;
        await bgmEl.play();
        fadeTo(BGM_TARGET_VOL, 800);
        bgmEnabled=true;
        bgmToggle.textContent='ğŸµ èƒŒæ™¯éŸ³æ¨‚ï¼šé—œ';
      }else{
        fadeTo(0, 500);
        setTimeout(()=>{ bgmEl.muted=true; }, 550);
        bgmEnabled=false;
        bgmToggle.textContent='ğŸµ èƒŒæ™¯éŸ³æ¨‚ï¼šé–‹';
      }
    }catch(e){
      console.warn(e);
    }
  });

  // Quiz åˆ†æ•¸èˆ‡æ ¸å°
  let score=0,answered=0;
  const totalQuestions=document.querySelectorAll('.question').length;
  function checkAnswer(btn,ok){
    if(btn.classList.contains('answered')) return;
    const box=btn.closest('.question'); if(box.dataset.locked) return; box.dataset.locked='1';
    btn.classList.add('answered'); answered++;
    if(ok){ score++; btn.style.background='#4CAF50'; playCorrect(); }
    else { btn.style.background='#E74C3C'; playWrong(); }
    if(answered>=totalQuestions){
      const result=document.getElementById('result');
      if(score===totalQuestions){ result.innerHTML='ğŸ‰ å¤ªå¼·äº†ï¼æ»¿åˆ† '+score+'/'+totalQuestions+'ï¼Œä½ æ˜¯ ESG å®ˆè­·è€…ï¼ğŸ‘'; playWin(); }
      else{ result.innerHTML=`å®Œæˆï¼å¾—åˆ† ${score}/${totalQuestions}ï¼Œä¸€èµ·æŒçºŒç¯€èƒ½æ¸›ç¢³ ğŸŒ`; }
    }
  }
  window.checkAnswer=checkAnswer;
</script>
</body>
</html>
